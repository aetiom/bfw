# Core\ModuleList

This class manage all modules.
It keeps an updated list of all loaded modules and it's also the one who instantiate `\BFW\Module` class for each module.

## Constants

### Errors/Exception codes

These constants are sent when an exception is thrown and used like exception code.

__`ERR_NOT_FOUND`__

Exception code if a module is not found.

__`ERR_NEEDED_NOT_FOUND`__

Exception code if a needed dependency is not found.

## Properties

__`protected \BFW\Module[] $modules = [];`__

All module instance.

__`protected array $loadTree = [];`__

The dependency tree for all modules

## Methods

### Getters

__`array public function getLoadTree()`__

Getter for property `$loadTree`.

__`\BFW\Module[] public function getModules()`__

Getter for property `$modules`.

__`\BFW\Module public getModuleByName(string $moduleName)`__

Getter to the module `$moduleName` in the list (property `$modules`).

If the module is not found, an exception will be thrown;
the exception code will be the constant `\BFW\Core\ModuleList::ERR_NOT_FOUND`.

### Add a module

__`void public addModule(string $moduleName)`__

Create a new instance of `\BFW\Module` for `$moduleName` and call the method `loadModule` of this new object.

Next add the new instance to the list in the property `$module`.

### Add needMe property to all modules

__`void public readNeedMeDependencies()`__

Read the file `module.json` of each module and search the property `needMe`.
If the property is found, all modules concerned will have the current module added in this property `require`.

The file `module.json` of concerned modules will never be edited.
The add to the property `require` is only in data on the `\BFW\Module` instance of the module.

For more detail about the `needMe` property, please refer to [issue #70](https://github.com/bulton-fr/bfw/issues/70).

### Generate the dependency tree

__`void public generateTree()`__

Generate the dependency tree of modules to load all modules in the correct order, and keep the tree on the property `$loadTree`.

The tree is generated by the lib [bulton-fr/dependency-tree](https://packagist.org/packages/bulton-fr/dependency-tree).

To generate the tree, the system uses properties `priority` and `require` from files `module.json` of each module.
The property `needMe` is also used, but indirectly because the call to `readNeedMeDependencies` (but the call is not made by this method).
